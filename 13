【概要説明】
このプロンプトは、LLMの出力に内在するノイズや揺らぎを前提とし、冗長性、複数案の生成、自己修正メカニズム、制約条件、評価エージェントの組み込みなど、様々な手法を組み合わせることで、より信頼性の高いアウトプットを生成することを目的としています。

---
## 【目的】
新製品Xを欧米市場に投入するための、具体的な戦略プランを作成する。

## 【言葉の定義】
-  「戦略プラン」とは、6ヶ月～1年以内に実行可能な、価格戦略、流通戦略、プロモーション戦略、ブランド戦略などを含む具体的なマーケティング施策の集合体。
-  「欧米市場」とは、アメリカ、カナダ、イギリス、ドイツ、フランスを指し、各国の文化、経済状況、法規制、市場動向などを考慮する。
-  「ノイズ」とは、LLMの出力結果に含まれる、事実に基づかない情報、不適切な表現、矛盾した情報、形式の不整合などを指す。
-  「揺らぎ」とは、同じプロンプトを複数回実行した場合に、LLMの出力結果が微妙に異なる現象を指す。
-  「自己修正メカニズム」とは、LLMが出力結果を評価し、ノイズや揺らぎを検出した場合、自動的に修正するプロセスを指す。

## 【背景】
-  新製品Xは、日本国内で高い評価を得ているオーガニック炭酸水であり、特に健康志向の強い消費者層から高い支持を得ている。
-  欧米市場への進出は初めてであり、ブランド認知度が低い。
-  競合ブランドが多数存在し、価格競争が激しい。
-  欧米市場の消費者は、健康志向、環境配慮、オーガニック製品への関心が高い。
-  LLMは、学習データに含まれるノイズやバイアスを反映した出力を生成する可能性があり、出力結果には一定の不確実性が伴う。

## 【役割定義】
1. **市場分析エージェント（Agent_Market1）**:
    *   **役割**: 欧米市場の消費者動向、競合製品、業界トレンドに関するデータを収集し、分析する。
    *   **処理手順**:
        1.  指定されたキーワードでWeb検索を実行し、最新の情報を収集する。
        2.  信頼できるマーケティング調査レポート、業界分析記事、競合企業のウェブサイトを収集し、信憑性を検証する。
        3.  収集した情報を整理・分析し、重要なデータやトレンドを抽出する。
    *   **出力フォーマット**: Markdown形式の箇条書きで、以下の情報を出力する。
        -   消費者動向: 健康志向（オーガニック志向、低糖質嗜好など）、購買行動の傾向（オンライン購入、店舗購入など）、価格感度など
        -   競合情報: 主要競合ブランドの市場シェア、価格帯、マーケティング戦略、強みと弱みなど
        -   業界トレンド: オーガニック製品の人気トレンド、最新のフレーバー、販売チャネルの変化、新たな規制の動きなど
    *   **制約条件**: 情報は最新であること（過去3ヶ月以内）、信頼性の高い情報源から収集すること。情報の偏りを避けるため、複数の情報源を参照すること。

2. **市場分析エージェント（Agent_Market2）**:
    *   **役割**: 欧米市場の消費者動向、競合製品、業界トレンドに関するデータを収集し、分析する。
    *   **処理手順**:
        1.  指定されたキーワードでWeb検索を実行し、最新の情報を収集する。
        2.  信頼できるマーケティング調査レポート、業界分析記事、競合企業のウェブサイトを収集し、信憑性を検証する。
        3.  収集した情報を整理・分析し、重要なデータやトレンドを抽出する。
    *   **出力フォーマット**: Markdown形式の箇条書きで、以下の情報を出力する。
        -  消費者動向: 健康志向（砂糖不使用嗜好、添加物回避嗜好など）、購買行動の傾向（高級志向、環境配慮型製品嗜好など）、価格感度など
        -   競合情報: 主要競合ブランドの価格帯、プロモーション戦略、ターゲット顧客層など
        -  業界トレンド: 欧米におけるオーガニック製品の規制動向、最新のマーケティング手法、インフルエンサーマーケティングの動向など
    *   **制約条件**: 情報は最新であること（過去3ヶ月以内）、信頼性の高い情報源から収集すること。情報の偏りを避けるため、複数の情報源を参照すること。

3.  **戦略仮説エージェント（Agent_Strategy）**:
    *   **役割**: Agent_Market1とAgent_Market2の出力結果に基づき、3つの異なる戦略仮説を立案する。
    *  **処理手順**:
        1.  Agent_Market1とAgent_Market2の結果を比較検討し、矛盾点や不一致を特定する。
        2.  1で特定した矛盾や不一致を踏まえ、3つの異なる戦略仮説を立案する（例：高価格帯プレミアム戦略、低価格大量販売戦略、オンライン直販特化戦略）。
        3.  各戦略仮説について、具体的なマーケティング施策、ターゲット顧客層、ブランドポジショニングなどを明確化する。
    *   **出力フォーマット**: Markdown形式で、以下の情報を出力する。
        -  戦略仮説1：タイトル、概要、根拠
        -  戦略仮説2：タイトル、概要、根拠
        -  戦略仮説3：タイトル、概要、根拠
    *   **制約条件**: 各戦略仮説はマーケティング理論に基づいており、根拠を明示すること。

4.  **批評エージェント（Agent_Critic）**:
    *   **役割**: Agent_Strategyの戦略仮説案を批判的に評価し、課題、リスク、改善点を指摘する。
    *   **処理手順**:
        1.  Agent_Strategyが提示した戦略仮説案を分析し、それぞれのメリット、デメリット、リスクを洗い出す。
        2.  各戦略仮説案について、論理的な整合性、実現可能性、競争優位性、倫理的な側面などを評価する。
        3.  各戦略仮説案に対して、客観的な視点から、課題、リスク、改善点を指摘する。
    *  **出力フォーマット**: Markdown形式で、以下の情報を出力する。
        -  戦略仮説1：課題、リスク、改善点
        -  戦略仮説2：課題、リスク、改善点
        -  戦略仮説3：課題、リスク、改善点
    *   **制約条件**: 各戦略仮説に対して、必ず1つ以上の課題、リスク、改善点を指摘し、実現可能な改善策を提案すること。
5.  **最終戦略策定エージェント（Agent_Final）**:
    *   **役割**: Agent_Criticの評価を踏まえ、最も有望な戦略案を1つ選択し、詳細な戦略プランを作成する。
    *   **処理手順**:
        1.  Agent_Criticが提示した評価を分析し、各戦略仮説の強み、弱み、リスクを比較検討する。
        2.  3つの戦略仮説案の中から、市場のニーズに合致し、実行可能性が高く、リスクが少なく、競争優位性のある戦略を１つ選択し、その選択理由を明確に説明する。
        3.  選んだ戦略仮説に基づき、詳細な戦略プラン（ターゲット顧客、ブランドポジショニング、販売チャネル、価格戦略、プロモーション戦略など）を作成する。
        4.  戦略プランの実現に必要なリソース、予算、スケジュールを明確化し、実行可能なレベルまで詳細化する。
    *  **出力フォーマット**: Markdown形式で、以下の情報を出力する。
        -  最終戦略案のタイトル、概要
        -  詳細な戦略プラン：ターゲット顧客、ブランドポジショニング、販売チャネル、価格戦略、プロモーション戦略など
        -  期待される成果（数値目標を含む）
        -  リスクと対策
        -  実行スケジュール
    *   **制約条件**: 各戦略要素は具体的で、実行可能なレベルまで詳細に記述すること。数値目標については、根拠となるデータや分析結果を明記すること。
6. **品質保証エージェント（Agent_QA）**:
    *   **役割**: 最終戦略プランが、制約条件、倫理ガイドライン、セキュリティ基準を満たしているか確認する。
    *   **処理手順**:
        1.  最終戦略プランを分析し、制約条件（出力形式、専門用語、価格範囲、倫理的な表現、個人情報）が守られているか確認する。
        2.  もし、違反があった場合は、該当箇所を特定し、修正指示を出す。
        3.  必要に応じて、再評価と修正を繰り返す。
    *  **出力形式**: Markdown形式で、以下の情報を出力する。
        -  制約条件のチェック結果（OK or NG）
        - 違反箇所の詳細と修正提案
    *   **制約条件**: 評価は客観的な基準に基づいて行い、感情的な判断は避けること。

7.  **ノイズ除去エージェント（Agent_NoiseReducer）**:
    *   **役割**: Agent_Market1とAgent_Market2の出力結果を比較し、矛盾や不整合を検出し、ノイズを低減する。
    *   **処理手順**:
        1.  Agent_Market1とAgent_Market2の出力結果を比較し、数値、キーワード、表現などの不一致を洗い出す。
        2.  不一致の原因を分析し、誤った情報や、不適切な表現を特定する。
        3.  より信頼性の高い情報を選択し、矛盾点を解消するよう出力を調整する。
    *   **出力形式**: Markdown形式で、以下の情報を出力する。
        -   Agent_Market1とAgent_Market2の出力結果の比較表
        -   特定されたノイズとその原因
        -   ノイズを修正した最終結果
    *   **制約条件**: 修正は客観的な根拠に基づき、情報の歪曲や偏った解釈は避けること。
    *   **ノイズ除去エージェントのメタプロンプト**:
        *  複数の情報を比較検討し、最も信頼性の高い情報源を選択するように指示
        *  曖昧な表現を避け、具体的な数値データや事実に基づいて判断するように指示
        *  異なる情報源から得た情報に矛盾がある場合は、その原因を分析し、解決策を提示するように指示

## 【処理手順】
1.  **情報収集フェーズ**: Agent_Market1とAgent_Market2が、並行して市場調査を実行し、結果をMarkdown形式で出力する。
2.  **ノイズ除去フェーズ**: Agent_NoiseReducerが、2つの市場分析レポートを比較検討し、ノイズを低減した最終レポートをMarkdown形式で出力する。
3.  **戦略仮説立案フェーズ**: Agent_Strategyが、ノイズ除去済みの市場分析レポートを基に、戦略仮説を立案し、Markdown形式で出力する。
4.  **戦略仮説評価フェーズ**: Agent_Criticが、戦略仮説を評価し、結果をMarkdown形式で出力する。
5.  **最終戦略策定フェーズ**: Agent_Finalが最終戦略プランを作成し、結果をMarkdown形式で出力する。
6.  **品質保証フェーズ**: Agent_QAは、最終出力結果を評価し、制約違反があれば修正を指示する。

## 【フォーマット】
- 全ての出力はMarkdown形式で記述する。
- 各エージェントの出力は、指定されたoutput\_formatに従う。
- 最終出力は、概要、市場分析、戦略仮説案、批評と改善点、最終戦略案、結論、品質保証結果の順で構成する。

## 【条件】
- 各エージェントは、自身に与えられた役割と責任範囲を厳守する。
- エージェント間の情報のやり取りは、指定された形式（JSON）に従って行う。
- 最終的な戦略プランは、Agent_Contextによる動的な修正に対応できるよう、柔軟性をもたせること。
- 制約条件に反する出力があった場合は、Agent_Finalは自己修正を試みるか、Agent_QAの指示に従い、再評価を行う。
- 複数案を作成する場合は、それぞれのメリット・デメリットを比較検討し、最適なものを選択する。

---
## 【指示文】
上記の情報と手順に従い、新製品Xの欧米市場戦略プランを作成せよ。
各エージェントは、自身の役割を理解し、責任を持ってタスクを遂行すること。
制約条件を厳守し、高品質で整合性の取れたアウトプットを目指すこと。
Agent_QAは、最終出力前に制約条件をチェックし、不合格の場合はAgent_Finalに修正を指示すること。
